---
title: "Getting OpenClinica data into R"
author: "Albert Cobos"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Getting OpenClinica data into R}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The `ox` package provides functions to get [OpenClinica](https://www.openclinica.com/community-edition-open-source-edc/) data into R. OpenClinica offers several formats for export files, the most complete ones being the CDISC ODM formats. 

The `ox` package has been developped and tested with the three availabe ODM 1.3 export formats in OpenClinica version 3.3:  

- CDISC ODM XML 1.3 Clinical Data
- CDISC ODM XML 1.3 Clinical Data with OpenClinica extensions
- CDISC ODM XML 1.3 Full with OpenClinica extensions

To use the `ox` package, you will need to:
- Dowload on of these file formats (.zip file), and 
- Unzip the downloaded file.

## The fast way

For most users, the most convenient way to proceed is as follows. 

First, you need to parse the xml file:

```{r}
# your (unziped) xml export file
xml_file <- system.file("extdata",
                        "odm1.3_clinical_ext_example_Optimal.xml",
                        package = "ox",
                        mustWork = TRUE)
library(ox)

# Parsing the xml file
doc <- xmlParse(xml_file)
```


to use function `ox_all()` from a parsed.

## Styles

The `html_vignette` template includes a basic CSS theme. To override this theme you can specify your own CSS in the document metadata as follows:

    output: 
      rmarkdown::html_vignette:
        css: mystyles.css

## Figures

The figure sizes have been customised so that you can easily put two images side-by-side. 

```{r, fig.show='hold'}
plot(1:10)
plot(10:1)
```

You can enable figure captions by `fig_caption: yes` in YAML:

    output:
      rmarkdown::html_vignette:
        fig_caption: yes

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

You can write math expressions, e.g. $Y = X\beta + \epsilon$, footnotes^[A footnote here.], and tables, e.g. using `knitr::kable()`.

```{r, echo=FALSE, results='asis'}
knitr::kable(head(mtcars, 10))
```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))
